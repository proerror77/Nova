# Nova Backend Remediation TODO

> å°ç…§ `COMPREHENSIVE_REVIEW_SUMMARY.md` èˆ‡æœ€æ–° code reviewï¼Œä»¥ä¸‹ç‚ºåŸ·è¡Œä¿®å¾©çš„è¿½è¹¤æ¸…å–®ã€‚å„ªå…ˆç´šä»¥ **P0 â†’ P1 â†’ P2** æ’åºï¼Œå®Œæˆå¾Œè«‹åœ¨æ­¤æ–‡ä»¶å‹¾é¸ä¸¦é€£çµå°æ‡‰ PRã€‚

## âœ… P0ï¼ˆWeek 1ï¼‰ â€” å¿…é ˆå…ˆå®Œæˆ

- [ ] **Proto å¥‘ç´„çµ±ä¸€**
  - ç§»é™¤ `proto/services/` é‡è¦†å®šç¾©ï¼Œæ”¹ç”¨ `protos/` ä½œç‚ºå”¯ä¸€ä¾†æº
  - é‡ç”Ÿæˆ client/serverï¼Œä¿®æ­£ build.rs åŠ CI
  - auth-service å¯¦ä½œ `UpdateUserProfile` / `UpsertUserPublicKey`
- [ ] **è³‡æ–™åº«é·ç§»æ‰å¹³åŒ–**
  - é‡æ–°ç·¨è™Ÿ `065/066/067` ç­‰è¡çªç‰ˆæœ¬
  - å°‡ `phase-7*` / `phase-7b` å¿…è¦é·ç§»æå‡è‡³ä¸» migrations
  - è£œ `user_profiles` / `user_permissions` / `users.public_key` ç­‰ç¼ºè¡¨
  - auth-service å•Ÿå‹•æ™‚åŸ·è¡Œ migrationsï¼ˆåš´æ ¼æ¨¡å¼ï¼‰
- [ ] **é‘‘æ¬Šä¿®å¾©**
  - [x] å¯¦ä½œ auth REST register/login/change/reset ä¸¦æ›è¼‰ JWT ä¸­é–“ä»¶
  - [x] çµ±ä¸€ Token æ’¤éŠ·éµåç‚º `nova:revoked:*`ï¼ŒæŠ½å‡ºå…±ç”¨å‡½å¼
  - [x] `gen_random_uuid()` â†’ `uuid_generate_v4()`ï¼ˆçµ±ä¸€ä½¿ç”¨ uuid-osspï¼‰
- [ ] **ä½¿ç”¨è€…è³‡æ–™èˆ‡å¿«å–**
  - `/api/v1/users/{id}` åƒ…æœ¬äººå¯è¦‹ email
  - Redis cache æ”œå¸¶ `created_at`ï¼Œé¿å…é€ å‡è³‡æ–™
- [ ] **Outbox / äº‹ä»¶é©…å‹•åŸºç¤**
  - å»ºç«‹ outbox consumerï¼ˆæˆ–æœå‹™ï¼‰è¼ªè©¢ `outbox_events` â†’ Kafka â†’ æ›´æ–° `published_at`
  - ç›£æ§é‡è©¦æ¬¡æ•¸èˆ‡ backlog

## ğŸŸ¡ P1ï¼ˆWeek 2-3ï¼‰ â€” å®Œæˆå¾Œæå‡å®‰å…¨/å¯é æ€§

- [ ] Redis é€£ç·šæ± åŒ–ï¼ˆç§»é™¤å…¨åŸŸ Mutexï¼‰
- [ ] æ•æ„Ÿå¯«æ“ä½œåŠ å…¥ç´°ç²’åº¦é€Ÿç‡é™åˆ¶èˆ‡ auth_logs é©—è­‰
- [ ] gRPC mTLS èˆ‡ service-to-service èªè­‰
- [ ] è£œå…… prom metricsï¼šauth/user profile/outbox latencyã€error rate
- [ ] æ“´å…… CIï¼šproto lintã€é·ç§» dry-runã€æ•´åˆæ¸¬è©¦
- [ ] å®Œæˆ Outbox æ¶ˆè²» E2E æ¸¬è©¦èˆ‡ staging é©—è­‰

## ğŸŸ  P2ï¼ˆWeek 4-6ï¼‰ â€” æ€§èƒ½ã€å¯è§€æ¸¬æ€§èˆ‡éƒ¨ç½²

- [ ] é‡å° cache / Redis / gRPC è¿½åŠ å„€è¡¨æ¿èˆ‡å‘Šè­¦
- [ ] RPS / P99 åŸºæº–æ¸¬è©¦èˆ‡å„ªåŒ–è¿­ä»£
- [ ] å„ªé›…é—œé–‰ã€æ»¾å‹•éƒ¨ç½²ã€è‡ªå‹•å¥åº·æª¢æŸ¥æµç¨‹
- [ ] æ–‡ä»¶æ›´æ–°ï¼šå”è­°ã€é·ç§»ã€é‹ç¶­æ‰‹å†Šã€å›æº¯è¨ˆç•«
- [ ] æœŸæœ«å›é¡§ï¼šæ ¸å° KPIï¼ˆå¥åº·åˆ†ã€è¦†è“‹ç‡ã€æˆæœ¬ã€å‘Šè­¦ç²¾åº¦ï¼‰

---

**å‚™è¨»**ï¼šæ›´æ–°æ­¤æª”æ¡ˆæ™‚è«‹ä¿æŒç²¾ç°¡ï¼Œåƒ…è¨˜éŒ„ã€Œå°šæœªå®Œæˆã€é …èˆ‡é—œéµæ±ºç­–ã€‚è©³ç´°è¨è«–è«‹æ”¾åœ¨å°ˆæ¡ˆ wiki æˆ–å°ˆç”¨ RFC æ–‡ä»¶ã€‚
