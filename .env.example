# Nova Platform Environment Variables Template
#
# Copy this file to .env and configure for your environment
# SECURITY: Never commit .env to version control

# =============================================================================
# Application Environment
# =============================================================================
# Valid values: development | staging | production
# IMPORTANT: staging and production REQUIRE TLS for gRPC
APP_ENV=development

# =============================================================================
# gRPC Client Configuration
# =============================================================================

# --- TLS/mTLS Configuration ---
# MANDATORY in production/staging environments
# Optional in development (defaults to false)
GRPC_TLS_ENABLED=false

# Required when GRPC_TLS_ENABLED=true:
GRPC_TLS_DOMAIN_NAME=example.com
GRPC_TLS_CA_CERT_PATH=/path/to/ca-certificate.pem

# Optional - Required for mutual TLS (mTLS):
# Both must be provided if using client authentication
GRPC_TLS_CLIENT_CERT_PATH=/path/to/client-certificate.pem
GRPC_TLS_CLIENT_KEY_PATH=/path/to/client-private-key.pem

# --- Service Endpoints ---
# Format: http://hostname:port (or https:// with TLS)
GRPC_AUTH_SERVICE_URL=http://auth-service:9080
GRPC_USER_SERVICE_URL=http://user-service:9081
GRPC_MESSAGING_SERVICE_URL=http://messaging-service:9082
GRPC_CONTENT_SERVICE_URL=http://content-service:9083
GRPC_FEED_SERVICE_URL=http://feed-service:9084
GRPC_SEARCH_SERVICE_URL=http://search-service:9085
GRPC_MEDIA_SERVICE_URL=http://media-service:9086
GRPC_NOTIFICATION_SERVICE_URL=http://notification-service:9087
GRPC_STREAMING_SERVICE_URL=http://streaming-service:9088
GRPC_CDN_SERVICE_URL=http://cdn-service:9089
GRPC_EVENTS_SERVICE_URL=http://events-service:9090
GRPC_VIDEO_SERVICE_URL=http://video-service:9091

# --- Connection Tuning ---
GRPC_CONNECTION_TIMEOUT_SECS=10
GRPC_REQUEST_TIMEOUT_SECS=30
GRPC_MAX_CONCURRENT_STREAMS=1000
GRPC_KEEPALIVE_INTERVAL_SECS=30
GRPC_KEEPALIVE_TIMEOUT_SECS=10

# --- Connection Pooling ---
GRPC_ENABLE_CONNECTION_POOLING=true
GRPC_CONNECTION_POOL_SIZE=10

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
# Redis command timeout (milliseconds)
# Affects how long rate limiting operations wait for Redis responses
# Default: 3000ms (3 seconds), Minimum: 500ms
REDIS_COMMAND_TIMEOUT_MS=3000

# Note: Rate limit policies are configured in code via RateLimitConfig
# Default presets available:
# - RateLimitConfig::auth_strict() - 5 requests/minute, fail-closed
# - RateLimitConfig::api_lenient() - 100 requests/minute, fail-open

# =============================================================================
# Production TLS Setup Example
# =============================================================================
# Uncomment and configure for staging/production:
#
# APP_ENV=production
# GRPC_TLS_ENABLED=true
# GRPC_TLS_DOMAIN_NAME=grpc.nova-platform.com
# GRPC_TLS_CA_CERT_PATH=/etc/nova/certs/ca.pem
# GRPC_TLS_CLIENT_CERT_PATH=/etc/nova/certs/client.pem
# GRPC_TLS_CLIENT_KEY_PATH=/etc/nova/certs/client-key.pem
#
# GRPC_AUTH_SERVICE_URL=https://auth-service.nova-platform.internal:9080
# GRPC_USER_SERVICE_URL=https://user-service.nova-platform.internal:9081
# ...
