apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: nova
  namespace: nova

# Namespace
namespace: nova

# Resources to deploy
resources:
  - namespace.yaml
  - rbac.yaml
  - secret.yaml
  - configmap.yaml
  - redis.yaml
  - postgres.yaml
  - deployment.yaml
  - ingress.yaml
  - hpa.yaml

# Common labels applied to all resources
commonLabels:
  app: nova
  version: v1
  managed-by: kustomize

# Common annotations applied to all resources
commonAnnotations:
  managed-by: "kustomize"
  deployment-time: "2024-10-17"

# Image replacement (update in CI/CD)
images:
- name: nova-api
  newName: your-registry/nova-api
  newTag: latest
