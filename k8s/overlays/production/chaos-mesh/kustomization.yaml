apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: default

resources:
  - ../../../base/chaos-mesh/namespace.yaml
  - ../../../base/chaos-mesh/rbac.yaml
  - ../../../base/chaos-mesh/deployment.yaml
  - ../../../base/chaos-mesh/service.yaml
  # Production: Only safe, scheduled chaos experiments
  - ../../../base/chaos-mesh/experiments/scheduled-chaos.yaml
  - production-safe-chaos.yaml

# Production-specific patches
patchesStrategicMerge:
  - deployment-patch.yaml
  - scheduled-chaos-patch.yaml

commonLabels:
  environment: production
  chaos.mesh/enabled: "true"
  chaos.mesh/approved: "true"  # Require approval for production chaos
