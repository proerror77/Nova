apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: default

resources:
  - ../../../base/chaos-mesh/namespace.yaml
  - ../../../base/chaos-mesh/rbac.yaml
  - ../../../base/chaos-mesh/deployment.yaml
  - ../../../base/chaos-mesh/service.yaml
  - ../../../base/chaos-mesh/experiments/network-chaos.yaml
  - ../../../base/chaos-mesh/experiments/pod-chaos.yaml
  - ../../../base/chaos-mesh/experiments/stress-chaos.yaml
  - ../../../base/chaos-mesh/experiments/workflow-chaos.yaml
  - ../../../base/chaos-mesh/experiments/scheduled-chaos.yaml

# Staging-specific patches
patchesStrategicMerge:
  - deployment-patch.yaml
  - scheduled-chaos-patch.yaml

commonLabels:
  environment: staging
  chaos.mesh/enabled: "true"
