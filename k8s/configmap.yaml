apiVersion: v1
kind: ConfigMap
metadata:
  name: nova-config
  namespace: nova
  labels:
    app: nova
data:
  # Application environment
  APP_ENV: "production"
  APP_HOST: "0.0.0.0"
  APP_PORT: "8080"
  RUST_LOG: "info,actix_web=info,sqlx=warn"

  # Database configuration
  DATABASE_MAX_CONNECTIONS: "20"

  # Redis configuration
  REDIS_POOL_SIZE: "10"

  # JWT configuration
  JWT_ACCESS_TOKEN_TTL: "3600"       # 1 hour
  JWT_REFRESH_TOKEN_TTL: "2592000"   # 30 days

  # Rate limiting
  RATE_LIMIT_MAX_REQUESTS: "100"
  RATE_LIMIT_WINDOW_SECS: "60"

  # S3 configuration
  S3_PRESIGNED_URL_EXPIRY_SECS: "900"  # 15 minutes

  # CORS configuration (comma-separated)
  CORS_ALLOWED_ORIGINS: "https://nova.app,https://www.nova.app,https://app.nova.app"
  CORS_MAX_AGE: "3600"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-config
  namespace: nova
  labels:
    app: nova-postgres
data:
  # PostgreSQL configuration
  POSTGRES_INITDB_ARGS: "--encoding=UTF8 --locale=C"
