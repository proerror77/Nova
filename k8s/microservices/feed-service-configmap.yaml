apiVersion: v1
kind: ConfigMap
metadata:
  name: feed-service-config
  labels:
    app: feed-service
    tier: backend
data:
  APP_ENV: staging
  LOG_LEVEL: info
  SERVER_PORT: "8084"
  DATABASE_MAX_CONNECTIONS: "20"
  ENABLE_AB_TESTING: "false"
  KAFKA_BOOTSTRAP_SERVERS: kafka:9092
  KAFKA_GROUP_ID: feed-service-group
  REDIS_COMMAND_TIMEOUT_MS: "5000"
  NEO4J_ENABLED: "true"
  NEO4J_URI: bolt://neo4j:7687
  NEO4J_USER: neo4j
  USER_SERVICE_GRPC_URL: https://identity-service.nova-staging.svc.cluster.local:50051
  RANKING_SERVICE_GRPC_URL: https://ranking-service.nova-staging.svc.cluster.local:9094
  GRPC_IDENTITY_SERVICE_URL: https://identity-service.nova-staging.svc.cluster.local:50051
  GRPC_USER_SERVICE_URL: https://identity-service.nova-staging.svc.cluster.local:50051
  GRPC_CONTENT_SERVICE_URL: https://content-service.nova-staging.svc.cluster.local:9080
  GRPC_RANKING_SERVICE_URL: https://ranking-service.nova-staging.svc.cluster.local:9094
  GRPC_GRAPH_SERVICE_URL: https://graph-service.nova-staging.svc.cluster.local:9080
  GRPC_TLS_ENABLED: "true"
  GRPC_TLS_CA_CERT_PATH: /etc/nova/certs/ca.crt
  GRPC_TLS_CLIENT_CERT_PATH: /etc/nova/certs/client.crt
  GRPC_TLS_CLIENT_KEY_PATH: /etc/nova/certs/client.key
  # Use a wildcard-friendly SNI that matches the issued cert (*.nova-staging.svc.cluster.local)
  # so all internal gRPC calls (content/identity/graph/ranking/...) pass TLS verification.
  GRPC_TLS_DOMAIN_NAME: content-service.nova-staging.svc.cluster.local
