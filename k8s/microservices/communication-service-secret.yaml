apiVersion: v1
kind: Secret
metadata:
  name: communication-service-secret
  namespace: nova
  labels:
    app: communication-service
    version: v2
type: Opaque
stringData:
  # Database connection
  database-url: "postgresql://nova_user:CHANGE_ME@postgres:5432/nova_communication?sslmode=require"

  # SMTP configuration
  smtp-host: "smtp.gmail.com"
  smtp-port: "587"
  smtp-username: "CHANGE_ME@gmail.com"
  smtp-password: "CHANGE_ME"
  smtp-from-address: "noreply@nova.dev"

  # Firebase Cloud Messaging (FCM) for Android push notifications
  fcm-server-key: "CHANGE_ME"
  fcm-project-id: "CHANGE_ME"

  # Apple Push Notification Service (APNS) for iOS push notifications
  apns-key-id: "CHANGE_ME"
  apns-team-id: "CHANGE_ME"
  apns-bundle-id: "com.nova.app"
  apns-private-key: |
    -----BEGIN PRIVATE KEY-----
    CHANGE_ME
    -----END PRIVATE KEY-----

---
# NOTE: For production, use External Secrets Operator
# Example:
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: communication-service-external-secret
#   namespace: nova
# spec:
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: SecretStore
#   target:
#     name: communication-service-secret
#   data:
#   - secretKey: database-url
#     remoteRef:
#       key: nova/communication-service/database-url
#   - secretKey: smtp-password
#     remoteRef:
#       key: nova/communication-service/smtp-password
#   - secretKey: fcm-server-key
#     remoteRef:
#       key: nova/communication-service/fcm-server-key
#   - secretKey: apns-private-key
#     remoteRef:
#       key: nova/communication-service/apns-private-key