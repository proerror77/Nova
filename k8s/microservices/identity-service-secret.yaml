apiVersion: v1
kind: Secret
metadata:
  name: identity-service-secret
  namespace: nova
  labels:
    app: identity-service
    version: v2
type: Opaque
stringData:
  # Database connection (replace with actual values or use External Secrets Operator)
  database-url: "postgresql://nova_user:CHANGE_ME@postgres:5432/nova_identity?sslmode=require"

  # JWT RS256 private key (replace with actual key)
  jwt-private-key: |
    -----BEGIN RSA PRIVATE KEY-----
    REPLACE_WITH_ACTUAL_PRIVATE_KEY
    -----END RSA PRIVATE KEY-----

  # JWT RS256 public key (replace with actual key)
  jwt-public-key: |
    -----BEGIN PUBLIC KEY-----
    REPLACE_WITH_ACTUAL_PUBLIC_KEY
    -----END PUBLIC KEY-----

  # Password hashing salt (replace with actual salt, generate with: openssl rand -base64 32)
  password-salt: "REPLACE_WITH_ACTUAL_SALT"

  # Admin initial credentials (for bootstrapping, change immediately)
  admin-email: "admin@nova.local"
  admin-password: "CHANGE_ME_IMMEDIATELY"

---
# NOTE: For production, use External Secrets Operator to sync secrets from AWS Secrets Manager / HashiCorp Vault
# Example External Secret resource:
#
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: identity-service-external-secret
#   namespace: nova
# spec:
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: SecretStore
#   target:
#     name: identity-service-secret
#   data:
#   - secretKey: database-url
#     remoteRef:
#       key: nova/identity-service/database-url
#   - secretKey: jwt-private-key
#     remoteRef:
#       key: nova/identity-service/jwt-private-key
#   - secretKey: jwt-public-key
#     remoteRef:
#       key: nova/identity-service/jwt-public-key
#   - secretKey: password-salt
#     remoteRef:
#       key: nova/identity-service/password-salt