---
# S3 和数据库凭证
apiVersion: v1
kind: Secret
metadata:
  name: nova-s3-credentials
  namespace: nova
type: Opaque
stringData:
  # AWS S3 配置
  AWS_REGION: us-east-1
  S3_BUCKET: nova-uploads
  AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID}        # 由 CI/CD 替换
  AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY}  # 由 CI/CD 替换

---
# 数据库凭证
apiVersion: v1
kind: Secret
metadata:
  name: nova-db-credentials
  namespace: nova
type: Opaque
stringData:
  # 通用数据库 URL（向后兼容）
  DATABASE_URL: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_content
  DB_USER: nova
  DB_PASSWORD: ${DB_PASSWORD}  # 由 CI/CD 替换

  # 各服务专用数据库 URL
  auth-db-url: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_auth
  user-db-url: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_user
  content-db-url: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_content
  feed-db-url: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_feed
  media-db-url: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_media
  messaging-db-url: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_messaging
  search-db-url: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_search
  streaming-db-url: postgres://nova:${DB_PASSWORD}@postgres:5432/nova_streaming

---
# Redis 凭证
apiVersion: v1
kind: Secret
metadata:
  name: nova-redis-credentials
  namespace: nova
type: Opaque
stringData:
  REDIS_URL: redis://redis:6379

---
# JWT 密钥
apiVersion: v1
kind: Secret
metadata:
  name: nova-jwt-keys
  namespace: nova
type: Opaque
stringData:
  JWT_PUBLIC_KEY_PEM: |
    ${JWT_PUBLIC_KEY}  # 由 CI/CD 替换
  JWT_PRIVATE_KEY_PEM: |
    ${JWT_PRIVATE_KEY}  # 由 CI/CD 替换
