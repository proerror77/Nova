# ClickHouse Service pointing to ClickHouse Operator managed pods
# Note: The actual ClickHouse pods are managed by ClickHouse Operator (chi-nova-ch)
# This Service provides a stable DNS name for other services to connect to
apiVersion: v1
kind: Service
metadata:
  name: clickhouse
  labels:
    app: clickhouse
    managed-by: clickhouse-operator
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 8123
      targetPort: 8123
      protocol: TCP
    - name: native
      port: 9000
      targetPort: 9000
      protocol: TCP
  selector:
    # Select pods created by ClickHouse Operator
    clickhouse.altinity.com/chi: nova-ch
    clickhouse.altinity.com/ready: "yes"
