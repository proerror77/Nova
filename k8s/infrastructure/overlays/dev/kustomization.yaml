apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
- ../../base

namespace: nova-dev

# 开发环境特定配置 - 资源限制较低以节省成本
patchesStrategicMerge:
- deployment-patch.yaml

# 环境变量覆盖
configMapGenerator:
- name: nova-config
  behavior: merge
  literals:
  - APP_ENV=development
  - LOG_LEVEL=debug
  - RUST_LOG=debug,actix_web=debug

# 镜像配置（用于本地开发，可能需要 imagePullPolicy: Never）
images:
- name: nova/content-service
  newTag: dev-latest
  newName: nova/content-service
- name: nova/media-service
  newTag: dev-latest
  newName: nova/media-service

# 副本数（开发环境使用1个副本）
replicas:
- name: analytics-service
  count: 1
- name: content-service
  count: 1
- name: feed-service
  count: 1
- name: graph-service
  count: 1
- name: graphql-gateway
  count: 1
- name: identity-service
  count: 1
- name: media-service
  count: 1
- name: notification-service
  count: 1
- name: ranking-service
  count: 1
- name: realtime-chat-service
  count: 1
- name: search-service
  count: 1
- name: social-service
  count: 1
- name: trust-safety-service
  count: 1

commonAnnotations:
  environment: development
  deployment.kubernetes.io/revision: "1"
