# Nova Social Platform - æŠ€æœ¯å€ºåŠ¡æ¸…å•

**ç”Ÿæˆæ—¥æœŸ**: 2025-10-23
**ä¼˜å…ˆçº§**: ðŸ”´ ä¸¥é‡ | ðŸŸ¡ ä¸­ç­‰ | ðŸŸ¢ ä½Ž

---

## å¿«é€Ÿå‚è€ƒ

| ç±»åˆ« | æ•°é‡ | ä¼˜å…ˆçº§ | ä¿®å¤æ—¶é—´ |
|------|------|--------|---------|
| todo!()å®è°ƒç”¨ | 15+ | ðŸ”´ | 40å°æ—¶ |
| é‡å¤å®žçŽ° | 3+ | ðŸ”´ | 30å°æ—¶ |
| Mockå®žçŽ° | 20+ | ðŸ”´ | 60å°æ—¶ |
| ç¼ºå¤±åŠŸèƒ½ | 8+ | ðŸ”´ | 200å°æ—¶ |
| ä¸å®Œæ•´API | 12+ | ðŸŸ¡ | 50å°æ—¶ |
| æµ‹è¯•ç¼ºå¤± | 90% | ðŸ”´ | 150å°æ—¶ |

**æ€»æŠ€æœ¯å€ºåŠ¡**: ~600å°æ—¶ â‰ˆ 15å‘¨ï¼ˆå•äººå¼€å‘ï¼‰

---

## æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»

### ðŸ”´ ä¸¥é‡ - ä¼šå¯¼è‡´ç”Ÿäº§crash

#### 1. Recommendation V2å®Œå…¨æœªå®žçŽ°
```rust
// backend/user-service/src/services/recommendation_v2/mod.rs:46
pub async fn new(config: RecommendationConfig) -> Result<Self> {
    todo!("Implement RecommendationServiceV2::new")
}

pub async fn get_recommendations(&self, user_id: Uuid, limit: usize) -> Result<Vec<Uuid>> {
    todo!("Implement get_recommendations")
}
```

**å½±å“**: ä»»ä½•è°ƒç”¨æŽ¨èAPIçš„ç”¨æˆ·ä¼šçœ‹åˆ°panic
**ä¿®å¤æˆæœ¬**: 200å°æ—¶
**é£Žé™©**: çº¿ä¸Šcrash

---

#### 2. è§†é¢‘åµŒå…¥ç”Ÿæˆè¿”å›žå…¨é›¶å‘é‡
```rust
// backend/user-service/src/services/deep_learning_inference.rs:56
let embedding = vec![0.0; self.config.embedding_dim];
```

**å½±å“**: 
- æ‰€æœ‰è§†é¢‘ç›¸ä¼¼åº¦è®¡ç®—éƒ½å¤±è´¥
- æŽ¨èç»“æžœæ— ç”¨
- æ— æ³•æ£€æµ‹åžƒåœ¾è§†é¢‘

**ä¿®å¤æˆæœ¬**: 150å°æ—¶ï¼ˆéœ€è¦TensorFlowé›†æˆï¼‰
**é£Žé™©**: æŽ¨èç³»ç»Ÿå®Œå…¨å¤±æ•ˆ

---

#### 3. Feedæœ‰ä¸‰ä¸ªäº’ç›¸å†²çªçš„å®žçŽ°
```
feed_service.rs (523è¡Œ) - DEPRECATED
feed_ranking.rs (727è¡Œ) - PRODUCTIONï¼Ÿ
feed_ranking_service.rs (474è¡Œ) - ALTERNATIVEï¼Ÿ
```

**å“ªä¸ªæ˜¯æ­£ç¡®çš„**ï¼Ÿæ²¡äººçŸ¥é“ã€‚

**å½±å“**: 
- æ²¡æœ‰ä¸€ä¸ªå®Œæ•´
- ç»´æŠ¤ä¸‰å€å·¥ä½œé‡
- æ— æ³•åŒæ—¶å‡çº§

**ä¿®å¤æˆæœ¬**: 80å°æ—¶é‡æž„
**é£Žé™©**: ç”Ÿäº§ç”¨å“ªä¸ªéƒ½æ˜¯é”™çš„

---

#### 4. OAuthæ”¯æŒå­˜åœ¨ä½†ä¸å·¥ä½œ
```rust
// backend/user-service/src/services/oauth/
pub mod google;   // å­˜åœ¨ä½†ç©º
pub mod apple;    // å­˜åœ¨ä½†ç©º
pub mod facebook; // å­˜åœ¨ä½†ç©º
```

**å½±å“**: æ‰€æœ‰ç¤¾äº¤ç™»å½•éƒ½å¤±è´¥
**ä¿®å¤æˆæœ¬**: 120å°æ—¶
**ç”¨æˆ·ä½“éªŒ**: â­ 0æ˜Ÿ

---

### ðŸŸ¡ ä¸­ç­‰ - åŠŸèƒ½ç¼ºå¤±æˆ–æ€§èƒ½é—®é¢˜

#### 5. ClickHouseæŸ¥è¯¢æœªä¼˜åŒ–
```rust
// feed_ranking.rs: get_followees_candidates()
// æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯æ–°æŸ¥è¯¢ï¼Œæ— ç¼“å­˜
// åº”è¯¥ç”¨ç‰©åŒ–è§†å›¾å’ŒRedis
```

**å½±å“**: P95å»¶è¿Ÿ > 1ç§’ï¼ˆç›®æ ‡<200msï¼‰
**ä¿®å¤æˆæœ¬**: 40å°æ—¶
**ç”¨æˆ·ä½“éªŒ**: é€Ÿåº¦æ…¢

---

#### 6. æ¶ˆæ¯æœç´¢å®Œå…¨ç¼ºå¤±
```
åŽç«¯: search-serviceä¸å­˜åœ¨
iOS: SearchRepositoryå­˜åœ¨ä½†æ— å®žçŽ°
```

**å½±å“**: ç”¨æˆ·æ— æ³•æœç´¢èŠå¤©è®°å½•
**ä¿®å¤æˆæœ¬**: 100å°æ—¶
**åŠŸèƒ½å®Œæ•´åº¦**: -10%

---

#### 7. ç¦»çº¿æ”¯æŒä¸å®Œæ•´
```swift
// iOS: LocalStorageManagerå®šä¹‰äº†ï¼Œä½†ï¼š
- SwiftDataæ¨¡åž‹å®šä¹‰å­˜åœ¨
- æ•°æ®åº“æ“ä½œé€»è¾‘ç¼ºå¤±
- åŒæ­¥é€»è¾‘ä¸å®Œæ•´
```

**å½±å“**: ç¦»çº¿æ—¶åº”ç”¨ä¸å¯ç”¨
**ä¿®å¤æˆæœ¬**: 80å°æ—¶
**ç”¨æˆ·ä½“éªŒ**: ç½‘ç»œä¸ç¨³å®šæ—¶å¡é¡¿

---

### ðŸŸ¢ ä½Ž - ä»£ç è´¨é‡é—®é¢˜

#### 8. Token Revocationæœªå®žçŽ°
```rust
// backend/user-service/src/services/token_revocation.rs
// æ–‡ä»¶å­˜åœ¨ï¼Œå†…å®¹ä¸ºç©º
// å®šä¹‰å­˜åœ¨ï¼Œå®žçŽ°ä¸ºç©º
```

**å½±å“**: ç”¨æˆ·æ³¨é”€åŽtokenä»æœ‰æ•ˆ
**ä¿®å¤æˆæœ¬**: 20å°æ—¶
**å®‰å…¨çº§åˆ«**: ðŸ”´ ä¸­ç­‰é£Žé™©

---

#### 9. ç¼ºå°‘è¾“å…¥éªŒè¯
```rust
// handlersä¸­æ²¡æœ‰å……åˆ†çš„validation
// ä¾‹ï¼šCreatePostViewå…è®¸æ— é™é•¿æ–‡æœ¬
```

**å½±å“**: ç¼“å†²åŒºæº¢å‡ºã€XSSç­‰
**ä¿®å¤æˆæœ¬**: 30å°æ—¶
**å®‰å…¨çº§åˆ«**: ðŸ”´ é«˜é£Žé™©

---

#### 10. æ²¡æœ‰çœŸæ­£çš„é›†æˆæµ‹è¯•
```
åŽç«¯: tests/ç›®å½•åŸºæœ¬ä¸ºç©º
iOS: UI testså­˜åœ¨ä½†ä¸è¿è¡Œ
```

**å½±å“**: æ— æ³•éªŒè¯ç«¯åˆ°ç«¯æµç¨‹
**ä¿®å¤æˆæœ¬**: 150å°æ—¶
**ä¿¡å¿ƒæŒ‡æ•°**: ðŸ“‰ ä½Ž

---

## æŒ‰æ¨¡å—çš„æŠ€æœ¯å€ºåŠ¡çŸ©é˜µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¨¡å—                     â”‚ å®Œæ•´åº¦   â”‚ æŠ€æœ¯å€º         â”‚ ä¼˜å…ˆçº§   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Authentication          â”‚ 75%      â”‚ OAuthç¼ºå¤±      â”‚ ðŸ”´ é«˜    â”‚
â”‚ Feed Ranking            â”‚ 50%      â”‚ 3é‡å®žçŽ°        â”‚ ðŸ”´ é«˜    â”‚
â”‚ Recommendation V2       â”‚ 5%       â”‚ å®Œå…¨ç¼ºå¤±       â”‚ ðŸ”´ é«˜    â”‚
â”‚ Video Processing        â”‚ 15%      â”‚ æ— ç”Ÿäº§å®žçŽ°     â”‚ ðŸ”´ é«˜    â”‚
â”‚ Messaging               â”‚ 75%      â”‚ Reactionsç¼ºå¤±  â”‚ ðŸŸ¡ ä¸­    â”‚
â”‚ Search                  â”‚ 0%       â”‚ å®Œå…¨ç¼ºå¤±       â”‚ ðŸ”´ é«˜    â”‚
â”‚ Notifications           â”‚ 30%      â”‚ æ¶ˆè´¹é€»è¾‘ç¼ºå¤±   â”‚ ðŸŸ¡ ä¸­    â”‚
â”‚ iOS UI                  â”‚ 90%      â”‚ é€»è¾‘ä¸å®Œæ•´     â”‚ ðŸŸ¡ ä¸­    â”‚
â”‚ iOS Network             â”‚ 70%      â”‚ WebSocketç¼ºå¤±  â”‚ ðŸŸ¡ ä¸­    â”‚
â”‚ iOS Local Storage       â”‚ 40%      â”‚ æ•°æ®åº“é€»è¾‘ç¼ºå¤± â”‚ ðŸŸ¡ ä¸­    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŒ‰ä¿®å¤éš¾åº¦æŽ’åº

### æœ€å®¹æ˜“ï¼ˆ1-2å¤©ï¼‰
1. [ ] åˆ é™¤é‡å¤çš„feedå®žçŽ°ï¼ˆä¿ç•™feed_ranking.rsï¼‰
2. [ ] å®Œæˆtoken_revocation.rs
3. [ ] æ·»åŠ åŸºç¡€è¾“å…¥éªŒè¯

### ä¸­ç­‰ï¼ˆ1-2å‘¨ï¼‰
4. [ ] å®žçŽ°ç®€å•ç‰ˆæŽ¨èç³»ç»Ÿï¼ˆtrending onlyï¼‰
5. [ ] é›†æˆOAuthï¼ˆAppleå¿…é¡»ï¼ŒGoogleæ¬¡è¦ï¼‰
6. [ ] å®Œæˆæ¶ˆæ¯æœç´¢åŸºç¡€ç‰ˆ
7. [ ] å®Œæˆè§†é¢‘å¤„ç†ç®¡é“çš„ffmpegé›†æˆ

### å›°éš¾ï¼ˆ2-4å‘¨ï¼‰
8. [ ] å®Œå…¨é‡å†™æŽ¨èç³»ç»ŸV2
9. [ ] è§†é¢‘åµŒå…¥çœŸå®žç”Ÿæˆï¼ˆéœ€è¦TF servingï¼‰
10. [ ] å®Œæ•´çš„ç¦»çº¿æ”¯æŒ
11. [ ] æ€§èƒ½è°ƒä¼˜ï¼ˆè¾¾åˆ°<200mså»¶è¿Ÿï¼‰

### éžå¸¸å›°éš¾ï¼ˆ4å‘¨+ï¼‰
12. [ ] å®Œæ•´çš„A/Bæµ‹è¯•æ¡†æž¶
13. [ ] ONNXæ¨¡åž‹éƒ¨ç½²å’Œserving
14. [ ] åˆ†å¸ƒå¼è¿½è¸ªå’Œæ€§èƒ½ç›‘æŽ§

---

## ä»£ç å€ºåŠ¡è®¡åˆ†å¡

```
ä»£ç è¦†ç›–çŽ‡:          â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  15%
æ–‡æ¡£å®Œæ•´æ€§:          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  35%
æµ‹è¯•è¦†ç›–çŽ‡:          â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  5%
å®žçŽ°å®Œæ•´åº¦:          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  25%
å®‰å…¨æ€§:              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  20%
æ€§èƒ½ä¼˜åŒ–:            â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  5%
æ€»ä½“è´¨é‡:            â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  20%
```

---

## ç«‹å³è¡ŒåŠ¨æ¸…å•

### Week 1 (å…³é”®è·¯å¾„)
- [ ] æ‰¾å‡ºæ‰€æœ‰todo!()å®å¹¶æ ‡è®°
- [ ] åˆ›å»ºæŽ¨èç³»ç»Ÿç®€åŒ–ç‰ˆæœ¬ï¼ˆåŸºäºŽtrendingï¼‰
- [ ] åˆ é™¤é‡å¤çš„feedå®žçŽ°
- [ ] å®žçŽ°Apple OAuth

### Week 2
- [ ] é›†æˆffmpegå¤„ç†
- [ ] å®Œæˆæ¶ˆæ¯æœç´¢åŸºç¡€ç‰ˆ
- [ ] æ·»åŠ ç¼ºå¤±çš„input validation
- [ ] ç¬¬ä¸€æ‰¹é›†æˆæµ‹è¯•

### Week 3+
- [ ] è§†é¢‘åµŒå…¥çœŸå®žç”Ÿæˆ
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜ã€æŸ¥è¯¢ä¼˜åŒ–ï¼‰
- [ ] å®Œæ•´çš„iOS WebSocketé›†æˆ
- [ ] ç¦»çº¿æ”¯æŒ

---

## ä¼°ç®—çš„å‘è´§æ—¶é—´è¡¨

**å¦‚æžœç«‹å³å¼€å§‹ä¿®å¤**:

| ä¼˜å…ˆçº§ | åŠŸèƒ½ | æ—¶é—´ | ç´¯è®¡ |
|--------|------|------|------|
| P0 | åˆ é™¤å†²çªå®žçŽ° | 8h | 8h |
| P0 | TrendingæŽ¨è | 40h | 48h |
| P0 | OAuthåŸºç¡€ | 30h | 78h |
| P1 | è§†é¢‘å¤„ç†åŸºç¡€ | 60h | 138h |
| P1 | Feedæ€§èƒ½ | 30h | 168h |
| P1 | é›†æˆæµ‹è¯• | 60h | 228h |
| P2 | å®Œæ•´æŽ¨èç®—æ³• | 120h | 348h |
| P2 | ç¦»çº¿æ”¯æŒ | 60h | 408h |
| P3 | æ€§èƒ½ä¼˜åŒ– | 40h | 448h |

**æ€»è®¡**: 448å°æ—¶ = 11å‘¨ï¼ˆå•äººï¼‰or 3å‘¨ï¼ˆ4äººï¼‰

---

## å»ºè®®ï¼šé‡æ–°è®¾è®¡vsè¡¥ä¸ä¿®å¤

### é€‰é¡¹Aï¼šæ‰“è¡¥ä¸ä¿®å¤ï¼ˆçŸ­æœŸï¼‰
- ä¼˜ç‚¹ï¼šå¿«é€Ÿï¼Œèƒ½èµ¶ä¸Šdeadline
- ç¼ºç‚¹ï¼šç•™ä¸‹å¤§é‡å€ºåŠ¡ï¼ŒåŽç»­ç»´æŠ¤å›°éš¾
- æˆæœ¬ï¼šçŽ°åœ¨200å°æ—¶ + ä»¥åŽæ¯æœˆ20å°æ—¶ç»´æŠ¤å€ºåŠ¡

### é€‰é¡¹Bï¼šå®Œæ•´é‡æž„ï¼ˆé•¿æœŸï¼‰
- ä¼˜ç‚¹ï¼šå¹²å‡€çš„ä»£ç ï¼Œå¯ç»´æŠ¤æ€§å¼º
- ç¼ºç‚¹ï¼šå½“å‰éœ€è¦400å°æ—¶
- æˆæœ¬ï¼šçŽ°åœ¨400å°æ—¶ + ä»¥åŽæ¯æœˆ5å°æ—¶ç»´æŠ¤

**å»ºè®®**: æŠ˜ä¸­æ–¹æ¡ˆ
1. ç«‹å³ä¿®å¤critical bugsï¼ˆweek 1-2ï¼‰
2. å®žçŽ°ç®€åŒ–ç‰ˆåŠŸèƒ½ï¼ˆweek 3-4ï¼‰
3. é€æ­¥é‡æž„å…³é”®æ¨¡å—ï¼ˆåŽç»­ï¼‰

