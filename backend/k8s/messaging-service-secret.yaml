---
# Secret for Messaging Service Sensitive Data
apiVersion: v1
kind: Secret
metadata:
  name: messaging-service-secret
  namespace: nova-messaging
  labels:
    app: nova
    component: messaging-service
type: Opaque
stringData:
  # Database Credentials (shared with user-service)
  POSTGRES_USER: "postgres"
  POSTGRES_PASSWORD: "changeme-in-production"  # TODO: Update in production
  POSTGRES_DB: "nova_messaging"

  # Database URL (derived from above)
  DATABASE_URL: "postgresql://postgres:changeme-in-production@postgres.nova-db:5432/nova_messaging"

  # Redis Configuration
  REDIS_PASSWORD: "changeme-in-production"  # TODO: Update in production
  REDIS_URL: "redis://:changeme-in-production@redis.nova-cache:6379/0"

  # JWT Public Key for verifying client tokens
  JWT_PUBLIC_KEY_PEM: |
    -----BEGIN PUBLIC KEY-----
    MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAr1g5jAGoSEJN7qUp4Ogo
    BtfDtdZwY+151jPj3vu8Q7skdB7VX7gTJv2CQkrYtggmD+dUl6ws2A5isXmrr52D
    VKV07as2S7vXkzwP7MvuwWdpNLZIIB0GXD1Iacywu2XlxXBo4Ig24qxDIfSlkW7b
    v0hM9yX+NnW3McXrcAYxlIsdiCz9gDKosVUdQpl/i87Y83cupgg23fqnXGbIb8TI
    j2mnT/GL+cNiZyD+nPdZ7WTRERFZrLVoBC0FdoIwsDdOSwmuN5NjIDTOS7K0rWUt
    jCTIgMJrZEgIQUo2kD7d5KZbp0O6+C6BcpTMt59aoGBc9AH9h+aOwwOFQdtflMc/
    +QIDAQAB
    -----END PUBLIC KEY-----

  # Server-side encryption key for messaging (32 bytes base64)
  # Generate with: openssl rand -base64 32
  SECRETBOX_KEY_B64: "changeme-generate-32-byte-base64-key"  # TODO: Generate in production

  # Kafka Settings
  KAFKA_BROKERS: "kafka.nova-streaming:9092"
  KAFKA_SASL_USERNAME: ""  # Optional: if SASL enabled
  KAFKA_SASL_PASSWORD: ""  # Optional: if SASL enabled
